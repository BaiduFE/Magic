<!DOCTYPE HTML>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="description" content="Tooltip 组件">
        <title>提示框组件</title>
        <link rel="stylesheet" type="text/css" href="../../demos/common/demo.css">
        <script type="text/javascript" src="http://fe.bdimg.com/tangram/2.0.1.2.js"></script>
        <script type="text/javascript" src="../../demos/common/demo.js"></script>
        <link rel="stylesheet" type="text/css" href="./demo.css"/>
        <link rel="stylesheet" type="text/css" href="../../resources/default/common/common.css"/>
        <link rel="stylesheet" type="text/css" href="../../resources/default/magic.Background/magic.Background.css"/>
        <link rel="stylesheet" type="text/css" href="../../resources/default/magic.control.Popup/magic.control.Popup.css"/>
        <link rel="stylesheet" type="text/css" href="../../resources/default/magic.Tooltip/magic.Tooltip.css"/>
        <style type='text/css'>
            .magic-tooltip{
                color: black;
            }
            .demo-region {
                margin:20px auto;
                width: 600px;
                height: 350px;
                text-align: center;
            }
            .demo-flow{
                float: left;
            }
            .spacer{
                width: 150px;
            }
            .demo-line{
                height: 100px;
            }
            .demo-background{
                background: #f2f2f2;
                padding:16px 20px;
                width: 180px;
                font-size: 20px;
                color: black;
            }
        </style>
        <script type="text/javascript" src='../../src/import.php?f=magic.Tooltip'></script>
        <script type="text/javascript" src="../../demos/common/exec.js"></script>
    </head>
<body>
    <div class="content">
        <div class="demo-list">
            <h3>Demo列表</h3>
            <ul>
                <li><a href="./render.html">render 模式</a></li>
                <li><a href="./setup.html">setup 模式</a></li>
                <li><a href="./attach.html">绑定节点 示例</a></li>
                <li><a href="./focus.html">focus和blur 示例</a></li>
                <li><a href="./methods.html">接口示例</a></li>
            </ul>
            <h3>最佳demo列表</h3>
            <ul>
                <li><a href="./zhidaoDemo.html">用户提示信息</a></li>
                <li><a href="./tiebaDemo.html">按钮提示信息</a></li>
            </ul>
        </div>
        <div class="main-wrap">
            <div class="demo-wrap">
                <h3>Tooltip 组件</h3>
                <p>Render 模式: 通过调用 render 方法创建组件，可通过配置target参数，或者render时传入参数。</p>
                <div class="demo-view">
                    <div class="demo-region">
                        <div class="demo-line">
                            <div class='demo-flow demo-background' id='topRegion'>top tooltip 示例</div>
                            <div class='demo-flow spacer'>&nbsp;</div>
                            <div class='demo-flow demo-background' id='bottomRegion'>bottom tooltip 示例</div>
                        </div>
                        <div class="demo-line">
                            <div class='demo-flow demo-background' id='leftRegion'>left tooltip 示例</div>
                            <div class='demo-flow spacer'>&nbsp;</div>
                            <div class='demo-flow demo-background' id='rightRegion'>right tooltip 示例</div>
                        </div>
                        <div>
                            <table>
                                <tbody>
                                    <tr>
                                        <td>选择示例</td>
                                        <td><select id='slt'>
                                                <option value='0' selected>top tooltip示例</option>
                                                <option value='1'>bottom tooltip示例</option>
                                                <option value='2'>left tooltip示例</option>
                                                <option value='3'>right tooltip示例</option>
                                            </select>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>设置arrowPosition值：Number</td>
                                        <td><input type="text" id='numArrowPosition' value='0'/></td>
                                        <td></td>
                                        <td><input cmd="setTooltip('arrowPosition', 'numArrowPosition');" onclick="exec(this)" class="btn" type="button" value="apply"></td>
                                    </tr>
                                    <tr>
                                        <td>设置arrowPosition值：Percent</td>
                                        <td><input type="text" id='pctArrowPosition' value='0'/></td>
                                        <td>%</td>
                                        <td><input cmd="setTooltip('arrowPosition', 'pctArrowPosition');" onclick="exec(this)" class="btn" type="button" value="apply"></td>
                                    </tr>
                                    <tr>
                                        <td>设置offsetX值</td>
                                        <td><input type="text" id='offsetXValue' value='0'/></td>
                                        <td></td>
                                        <td><input cmd="setTooltip('offsetX', 'offsetXValue');" onclick="exec(this)" class="btn" type="button" value="apply"></td>
                                    </tr>
                                    <tr>
                                        <td>设置offsetY值</td>
                                        <td><input type="text" id='offsetYValue' value='0'/></td>
                                        <td></td>
                                        <td><input cmd="setTooltip('offsetY', 'offsetYValue');" onclick="exec(this)" class="btn" type="button" value="apply"></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
            <div class="console-wrap">
                <h3>控制台</h3>
                <div id="J_console" class="console"></div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
            function getTooltip(){
                return tooltips[baidu('#slt')[0].value];
            }
            function setTooltip(attr, id){
                var tooltip = getTooltip(),
                    value = baidu('#' + id)[0].value;
                value = parseFloat(value);
                id == 'pctArrowPosition' && (value += '%');
                value != undefined && (tooltip._options[attr] = value);
                tooltip.reposition();
            }
            var img = new Image();
            img.src = "http://www.baidu.com/img/baidu_jgylogo3.gif";
            img.onload = img.onreadystatechange = function(){
                if(img.readystate == "complete" || img.readystate == "loaded" || img.complete == true){  
                    baidu.forEach(tooltips, function(tooltip){
                        tooltip.reposition();
                    });
                }
            };
            var position = ['top', 'bottom', 'left', 'right'], tooltips = [];
            baidu.forEach(position, function(pos, index){
                var tooltip = new magic.Tooltip({
                    content: '<img src="http://www.baidu.com/img/baidu_jgylogo3.gif"/><div>this is a tooltip</div>',
                    position: pos
                });
                tooltip.render(pos + 'Region');
                tooltip.onbeforeshow = function() {
                    log(pos + ' tooltip info', 'beforeshow event');
                };
                tooltip.onshow = function() {
                    log(pos + ' tooltip info', 'show event' + ', offsetX = ' + tooltip._options.offsetX + ', offsetY = ' + tooltip._options.offsetY + ', arrowPosition = ' + tooltip._options.arrowPosition);
                };
                tooltip.onbeforehide = function() {
                    log(pos + ' tooltip info', 'beforehide event');
                };
                tooltip.onhide = function() {
                    log(pos + ' tooltip info', 'hide event');
                };
                tooltips.push(tooltip);
            });
    </script>
</body>
</html>
